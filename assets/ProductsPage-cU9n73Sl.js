import{a as U,b as j,f as G,j as e,d as k,e as J,g as K,h as I,i as X,k as Y}from"./main-JSc3Icei.js";import{r as m,S as ee,j as se,T as te,e as c,f as l,I as re,k as b,i as f,l as R,B as y,m as ie,n as ne,o as le,a as P,p as oe,E as ae,q as de,t as ce,M as he,D as C,u as xe,s as z}from"./antd-CQ5vwqdn.js";import"./react-D5d5vywP.js";const{Title:ue,Text:r}=te,{Search:ge}=re,{Option:o}=b,pe="your-cloud-name",$=(t,h=400)=>{if(!t||t.includes("res.cloudinary.com"))return t;const a=encodeURIComponent(t);return`https://res.cloudinary.com/${pe}/image/fetch/q_auto,f_webp,w_${h}/${a}`},ye=()=>{var T;const t=U(),{items:h,displayedItems:a,loading:A,error:S,categories:E,searchTerm:L,selectedCategory:F,priceRange:x,sortOption:B,currentPage:D,pageSize:_,totalItems:O}=j(s=>s.meals),q=j(s=>s.cart.items),[i,u]=m.useState(null),[N,v]=m.useState(!1),g=j(s=>{var n;return((n=s.auth)==null?void 0:n.isLoggedIn)||!1}),p=a.length>0?a:h;m.useEffect(()=>{t(G())},[t]);const V=s=>{const n=q.find(d=>d.id===s);return n?n.quantity:0},M=s=>{g?(t(K({id:s.idMeal,name:s.strMeal,image:s.strMealThumb,price:s.price||Math.floor(Math.random()*5e4)+1e4,quantity:1})),z.success(`${s.strMeal} added to cart`)):z.warning("Please login to add items to cart")},W=s=>{t(Y(s))},H=s=>{t(X(s)),t(I(1))},Z=s=>{t(I(s)),window.scrollTo({top:0,behavior:"smooth"})};if(A)return e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"100px"},children:e.jsx(ee,{indicator:e.jsx(se,{style:{fontSize:48},spin:!0})})});if(S)return e.jsxs("div",{children:["Error: ",S]});const w=()=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx(r,{strong:!0,style:{display:"block",marginBottom:8},children:"Sort By"}),e.jsxs(b,{placeholder:"Sort options",style:{width:"100%"},size:"middle",onChange:H,value:B||"default",children:[e.jsx(o,{value:"default",children:"Sort by Default"}),e.jsx(o,{value:"price_asc",children:"Price: Low to High"}),e.jsx(o,{value:"price_desc",children:"Price: High to Low"}),e.jsx(o,{value:"name_asc",children:"A-Z"}),e.jsx(o,{value:"name_desc",children:"Z-A"})]})]}),e.jsxs("div",{children:[e.jsx(r,{strong:!0,style:{display:"block",marginBottom:8},children:"Price Range"}),e.jsx(xe,{range:!0,min:0,max:1e5,value:x,onChange:W,style:{width:"100%"},trackStyle:[{backgroundColor:"#1890ff"}],handleStyle:[{borderColor:"#1890ff"},{borderColor:"#1890ff"}]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:8},children:[e.jsxs(r,{children:["$",x[0].toLocaleString()]}),e.jsxs(r,{children:["$",x[1].toLocaleString()]})]})]})]});return e.jsxs("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[e.jsx(ue,{level:2,style:{fontFamily:"sans-serif"},children:"SEAWEED MENU"}),e.jsxs(c,{gutter:[16,16],style:{marginBottom:"20px"},children:[e.jsx(l,{xs:24,sm:16,md:18,children:e.jsx(ge,{placeholder:"Search meals...",allowClear:!0,enterButton:"Search",size:"large",onSearch:s=>t(k(s)),onChange:s=>t(k(s.target.value)),value:L})}),e.jsx(l,{xs:24,sm:8,md:6,children:e.jsxs(b,{showSearch:!0,placeholder:"All Categories",style:{width:"100%"},size:"large",onChange:s=>t(J(s)),value:F,filterOption:(s,n)=>n.children.toLowerCase().indexOf(s.toLowerCase())>=0,children:[e.jsx(o,{value:"",children:"All Categories"}),E.map(s=>e.jsx(o,{value:s,children:s},s))]})})]}),e.jsxs(c,{gutter:[24,24],children:[e.jsx(l,{xs:0,sm:0,md:6,lg:5,xl:4,children:e.jsx(f,{title:e.jsxs(e.Fragment,{children:[e.jsx(R,{})," Filters"]}),styles:{header:{background:"#f0f2f5",fontWeight:"bold"},body:{padding:"24px"},position:"sticky",top:"20px"},children:e.jsx(w,{})})}),e.jsx(l,{xs:24,sm:24,md:0,style:{marginBottom:16},children:e.jsx(y,{type:"primary",icon:e.jsx(R,{}),onClick:()=>v(!0),style:{width:"100%"},size:"large",children:"Show Filters"})}),e.jsxs(l,{xs:24,sm:24,md:18,lg:19,xl:20,children:[e.jsx(c,{gutter:[16,16],children:p.length>0?p.map(s=>e.jsx(l,{xs:24,sm:12,md:8,lg:6,children:e.jsx(f,{hoverable:!0,cover:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{alt:s.strMeal,src:$(s.strMealThumb),style:{height:200,width:"100%",objectFit:"cover",borderRadius:"5px"},onClick:()=>u(s)}),s.strTags&&e.jsx(oe,{title:s.strTags.split(",").join(", "),children:e.jsx("div",{style:{position:"absolute",top:8,right:8,background:"rgba(0,0,0,0.7)",color:"white",padding:"2px 8px",borderRadius:4,fontSize:12},children:s.strTags.split(",").shift()})})]}),children:e.jsx(f.Meta,{title:e.jsx(r,{strong:!0,ellipsis:!0,children:s.strMeal}),description:e.jsxs(ie,{direction:"vertical",size:2,children:[e.jsxs(r,{strong:!0,style:{color:"#1890ff",fontSize:16},children:["$",(s.price||0).toLocaleString()]}),e.jsx(r,{type:"secondary",children:s.strCategory}),e.jsx(ne,{disabled:!0,defaultValue:Math.floor(Math.random()*3)+3,style:{fontSize:14}}),e.jsx(le,{count:V(s.idMeal),offset:[-10,10],style:{backgroundColor:"#5100aa"},children:e.jsx(y,{type:"primary",block:!0,icon:e.jsx(P,{}),onClick:()=>M(s),disabled:!g,children:"Add to Cart"})})]})})})},s.idMeal)):e.jsx(l,{span:24,children:e.jsx(ae,{description:"No meals found matching your criteria"})})}),p.length>0&&e.jsx("div",{style:{textAlign:"center",marginTop:24},children:e.jsx(de,{current:D,total:O,pageSize:_,onChange:Z,showSizeChanger:!1,rel:"nofollow"})})]})]}),e.jsx(ce,{title:"Filters",placement:"left",closable:!0,onClose:()=>v(!1),open:N,width:300,children:e.jsx(w,{})}),i&&e.jsxs(he,{title:i.strMeal,open:!!i,onCancel:()=>u(null),footer:[e.jsx(y,{type:"primary",icon:e.jsx(P,{}),onClick:()=>{M(i),u(null)},disabled:!g,children:"Add to Cart"},"addToCart")],width:800,children:[e.jsxs(c,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx("img",{src:$(i.strMealThumb,800),alt:i.strMeal,style:{width:"100%",borderRadius:8}})}),e.jsxs(l,{span:12,children:[e.jsx(r,{strong:!0,children:"Category: "}),e.jsx(r,{children:i.strCategory}),e.jsx(C,{}),e.jsx(r,{strong:!0,children:"Price: "}),e.jsxs(r,{style:{color:"#1890ff"},children:["$",(i.price||0).toLocaleString()]}),e.jsx(C,{}),e.jsx(r,{strong:!0,children:"Description:"}),e.jsxs("p",{style:{marginTop:8},children:[(T=i.strInstructions)==null?void 0:T.substring(0,300),"..."]})]})]}),e.jsx(C,{}),e.jsx(r,{strong:!0,children:"Ingredients:"}),e.jsx("ul",{style:{columns:2},children:Array.from({length:20}).map((s,n)=>{const d=i[`strIngredient${n+1}`],Q=i[`strMeasure${n+1}`];return d?e.jsxs("li",{children:[d," - ",Q]},n):null})})]})]})};export{ye as default};
